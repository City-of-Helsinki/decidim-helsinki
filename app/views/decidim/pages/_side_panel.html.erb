<div class="side-panel">
  <div class="sub-navigation">
    <input type="checkbox" class="sub-navigation-state hide-for-mediumlarge" id="sub_navigation_state">
    <label class="sub-navigation-opener hide-for-mediumlarge" for="sub_navigation_state">
      <%= t(".show_navigation") %>
    </label>
    <ul class="sub-navigation-content vertical menu">
      <% Decidim::StaticPageTopic.where(organization: current_organization).each do |topic| %>
        <% next unless topic.pages.any? %>

        <li>
          <%= link_to translated_attribute(topic.title), page_path(topic.pages.first) %>

          <ul class="nested vertical menu">
            <% topic.pages.each do |page| %>
              <li class="page-item <%= page == current ? "is-active" : nil %>">
                <%= link_to translated_attribute(page.title), page_path(page.slug) %>
              </li>
            <% end %>
          </ul>
        </li>
      <% end %>
      <% Decidim::StaticPage.where(topic: nil, organization: current_organization).each do |page| %>
        <li class="page-item <%= page == current ? "is-active" : nil %>">
          <%= link_to translated_attribute(page.title), page_path(page.slug) %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
