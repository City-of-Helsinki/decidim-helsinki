<% add_decidim_page_title(t(".sign_up")) %>

<% content_for :devise_links do %>
  <%= render "decidim/devise/shared/links" %>
<% end %>

<div class="wrapper">
  <div class="row">
    <div class="columns large-8 page-title">
      <h1><%= t(".sign_up") %></h1>
    </div>
  </div>
  <div class="row margin-bottom-3">
    <div class="columns large-8">
      <div class="static__content">
        <p>
          <%= t(".sign_up_service_account_description") %>
        </p>
        <p>
          <%= t(".already_have_an_account?") %>
          <%= link_to t(".sign_in"), new_user_session_path %>
        </p>
      </div>

      <%= decidim_form_for(@form, as: resource_name, url: registration_path(resource_name), html: { class: "register-form new_user", id: "register-form" }) do |f| %>
        <%= invisible_captcha %>

        <div class="field">
          <%= f.text_field :name, help_text: t(".username_help") %>
        </div>
        <div class="field">
          <%= f.text_field :nickname, help_text: t(".nickname_help", organization: current_organization.name) %>
        </div>
        <div class="field">
          <%= f.email_field :email, id: "registration_email", label_options: { for: "registration_email" } %>
        </div>
        <div class="field">
          <%= f.password_field :password, password_field_options_for(:user).merge(id: "registration_password", label_options: { for: "registration_password", tooltip: password_tooltip_for(:user) }) %>
        </div>
        <div class="field">
          <%= f.password_field :password_confirmation, password_field_options_for(:user).except(:help_text) %>
        </div>

        <div class="field-section margin-top-2">
          <h2 class="h3"><%= t(".tos_title") %></h2>

          <%= t(".tos_summary_html", privacy_link: t(".privacy_link")) %>

          <% if false %>
            <p class="tos-text">
              <%= strip_tags(translated_attribute(terms_and_conditions_page.content)) %>
            </p>
          <% end %>
          <div class="field">
            <%= f.check_box :tos_agreement, required: "true", label: t(".tos_agreement", link: link_to(t(".terms"), page_path("terms-and-conditions"), target: "_blank")) %>
          </div>
        </div>

        <div class="field-section margin-top-2">
          <h2 class="h3"><%= t(".newsletter_title") %></h2>

          <div class="field">
            <%= f.check_box :newsletter, label: t(".newsletter"), checked: @form.newsletter %>
          </div>
        </div>

        <div class="actions margin-top-2">
          <div class="actions">
            <%= f.submit t("devise.registrations.new.sign_up"), class: "button expanded" %>
          </div>
          <%= yield :devise_links %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= render "decidim/devise/shared/newsletter_modal" %>
