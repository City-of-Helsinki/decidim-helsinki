<%= content_tag :div, id: node_id, data: { decidim_comments: comments_data } do %>
  <div class="row">
    <div class="columns small-12 large-8 comments-container" id="comments">
      <div class="comments">
        <div class="comments__title">
          <div class="row medium-unstack">
            <div class="column">
              <div class="comments__title__text">
                <h2 class="h4">
                  <% if single_comment? %>
                    <%= t("decidim.components.comments.comment_details_title") %>
                  <% else %>
                    <span class="comments-count">
                      <%= t("decidim.components.comments.title", count: comments_count) %>
                    </span>
                  <% end %>
                </h2>
              </div>
            </div>
            <div class="column">
              <div class="order-by__text">
                <%= render :order_control %>
              </div>
            </div>
          </div>
        </div>
        <%= single_comment_warning %>
        <%= blocked_comments_warning %>
        <div class="comment-threads">
          <%= comments_loading %>
          <% comments.each do |comment| %>
            <%= cell("decidim/comments/comment_thread", comment, order: order) %>
          <% end %>
        </div>
        <%= add_comment %>
        <%= user_comments_blocked_warning %>
      </div>
      <div class="callout primary loading-comments hide">
        <p><%= t("decidim.components.comments.loading") %></p>
      </div>
    </div>
  </div>
<% end %>
