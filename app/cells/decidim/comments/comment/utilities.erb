<div class="comment__utilities">
  <%= link_to "#{commentable_path("commentId" => model.id)}#comment_#{model.id}", target: "_blank", class: "comment__header__context-menu__content-item", title: t("decidim.components.comment.single_comment_link_title"), data: { external_link_spacer: "" } do %>
    <%= icon "link-intact", aria_label: t("decidim.components.comment.single_comment_link_title") %>
  <% end %>

  <button type="button" class="link-alt comment__header__context-menu__content-item" data-open="<%= current_user.present? ? "flagModalComment#{model.id}" : "loginModal" %>" title="<%= t("decidim.components.comment.report.title") %>" aria-controls="<%= current_user.present? ? "flagModalComment#{model.id}" : "loginModal" %>" aria-haspopup="dialog" tabindex="0">
    <%= icon "flag", aria_label: t("decidim.components.comment.report.title") %>
  </button>

  <% if model.authored_by?(current_user) %>
    <button type="button" class="link-alt comment__header__context-menu__content-item" data-open="<%= "editCommentModal#{model.id}" %>" title="<%= t("decidim.components.comment.edit") %>" aria-controls="<%= "editCommentModal#{model.id}" %>" aria-haspopup="dialog" tabindex="0">
      <%= icon "pencil", aria_label: t("decidim.components.comment.edit") %>
    </button>

    <%= link_to comment_path, remote: true, method: :delete, class: "comment__header__context-menu__content-item", data: { confirm: t("decidim.components.comment.confirm_destroy") } do %>
      <%= icon "trash", aria_label: t("decidim.components.comment.delete") %>
    <% end %>
  <% end %>
</div>

<% unless reloaded? %>
  <% if current_user.present? %>
    <%= cell("decidim/flag_modal", model, modal_id: "flagModalComment#{model.id}") %>
  <% end %>
  <% if model.authored_by?(current_user) %>
    <%= cell("decidim/comments/edit_comment_modal_form", model, modal_id: "editCommentModal#{model.id}") %>
  <% end %>
<% end %>
